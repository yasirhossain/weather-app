{"version":3,"file":"0.08af4a50959af6030353.hot-update.js","sources":["../../src/client/modules/weather/containers/weather.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Button } from 'reactstrap';\n\nimport momentjs from 'moment';\nimport Moment from 'react-moment';\n\nimport axios from 'axios';\n\nexport default class Weather extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentWeatherData: {\n        city: {\n          name: '',\n          country: ''\n        },\n        main: {\n          temp: '',\n          temp_max: '',\n          temp_min: ''\n        },\n        weather: [\n          {\n            description: '',\n            main: ''\n          }\n        ]\n      },\n      weatherData: {\n        city: {\n          name: '',\n          country: ''\n        },\n        list: []\n      },\n      forecastData: []\n    };\n\n    this.subscription = null;\n  }\n\n  componentWillMount() {\n    this.getLocation();\n  }\n\n  getLocation() {\n    if (navigator) {\n      const geolocation = navigator.geolocation;\n\n      new Promise((resolve, reject) => {\n        geolocation.getCurrentPosition((position) => {\n          this.getWeatherForecast(position.coords.latitude, position.coords.longitude);\n        }, () => {\n          reject (new Error('Permission denied'));\n        });\n      });\n    }\n  }\n\n  getWeatherForecast(lat, long) {\n    const API_KEY = `46ddd9c3c6a545d0d62e60754768e38d`;\n    const WEATHER_CURRENT_URL = `http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${long}&appid=${API_KEY}&units=imperial`;\n    //const WEATHER_FORECAST_URL = `http://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${long}&appid=${API_KEY}&units=imperial`;\n    const WEATHER_FORECAST_URL = `http://api.openweathermap.org/data/2.5/forecast/daily?lat=${lat}&lon=${long}&appid=${API_KEY}&units=imperial&cnt=7`;\n\n    axios.get(WEATHER_CURRENT_URL).then(\n      (res) => {\n        if (res.data.cod !== '200' && res.data.message){\n          throw new Error(res.data.message);\n        } else {\n          console.log(res.data);\n          this.setState({\n            currentWeatherData: res.data,\n          });\n          return res.data;\n        }\n      },\n      (res) => {\n        throw new Error(res.data.message);\n      }\n    );\n\n    /*\n    axios.get(WEATHER_FORECAST_URL).then(\n      (res) => {\n        if (res.data.cod !== '200' && res.data.message){\n          throw new Error(res.data.message);\n        } else {\n          let fiveDayForecast = [];\n          let dayArray = [];\n          res.data.list.map((timeData, index) => {\n            if ((index + 1) % 8 === 0) {\n              fiveDayForecast.push(dayArray);\n              dayArray = new Array;\n            } else {\n              dayArray.push(timeData);\n            }\n          });\n          this.setState({\n            weatherData: res.data,\n            fiveDayForecast: fiveDayForecast\n          });\n          return res.data;\n        }\n      },\n      (res) => {\n        throw new Error(res.data.message);\n      }\n    );\n    */\n\n    axios.get(WEATHER_FORECAST_URL).then(\n      (res) => {\n        if (res.data.cod !== '200' && res.data.message){\n          throw new Error(res.data.message);\n        } else {\n          let forecastData = [];\n          console.log(res.data);\n          res.data.list.map((timeData, index) => {\n            forecastData.push(timeData);\n          });\n          this.setState({\n            forecastData: forecastData\n          });\n          return res.data;\n        }\n      },\n      (res) => {\n        throw new Error(res.data.message);\n      }\n    );\n  }\n\n  render() {\n    const { loading } = this.props;\n    console.log(this.state.currentData);\n    console.log(this.state.forecastData);\n    return (\n      <div className=\"text-center mt-4 mb-4\">\n        <h1>{ this.state.currentData.city.name }, { this.state.currentData.city.country }</h1>\n\n        <h2>Today's Forecast</h2>\n        <ul className=\"day list-unstyled\">\n          <li className=\"card\">\n            Time { this.state.currentData.main.dt_txt }\n            { this.state.currentData.main.temp }\n            Hi { this.state.currentData.main.temp_max }\n            Low { this.state.currentData.main.temp_min }\n          </li>\n        </ul>\n\n        <h2>Upcoming Forecast</h2>\n        {\n          this.state.forecastData.map(function(day) {\n            return (\n              <div className=\"forecast\" key={day.dt}>\n                <label><Moment format=\"dddd\">{day[0].dt_txt}</Moment></label>\n                <ul className=\"day list-unstyled\">\n                  {\n                    day.map(function(hour) {\n                      return (\n                        <li key={hour.dt} className=\"card\">\n                          Time { hour.dt_txt }\n                          { hour.main.temp }\n                          Hi { hour.main.temp_max }\n                          Low { hour.main.temp_min }\n                        </li>\n                      )\n                    })\n                  }\n                </ul>\n              </div>\n            )\n          })\n       }\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// src/client/modules/weather/containers/weather.jsx"],"mappings":";;A;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AAAA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAHA;AAKA;AAEA;AACA;AAFA;AAXA;AAiBA;AACA;AACA;AACA;AAFA;AAIA;AALA;AAOA;AAzBA;AACA;AA2BA;AA9BA;AA+BA;AACA;;;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAEA;AACA;AAEA;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAGA;AAHA;AAIA;AAJA;AADA;AASA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAFA;AAGA;AAHA;AAIA;AAJA;AAOA;AAXA;AAFA;AAkBA;AAnCA;AAuCA;;;;AA1KA;AACA;;;;;A","sourceRoot":""}