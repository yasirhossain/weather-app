{"version":3,"file":"0.a3e6dd3711c1902e43e1.hot-update.js","sources":["../../src/client/modules/weather/containers/weather.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Button } from 'reactstrap';\n\nimport momentjs from 'moment';\nimport Moment from 'react-moment';\n\nimport axios from 'axios';\n\nexport default class Weather extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentData: {\n        city: {\n          name: '',\n          country: ''\n        },\n        main: {\n          temp: '',\n          temp_max: '',\n          temp_min: ''\n        },\n        weather: [\n          {\n            description: '',\n            main: ''\n          }\n        ]\n      },\n      weatherData: {\n        city: {\n          name: '',\n          country: ''\n        },\n        list: []\n      },\n      forecastData: []\n    };\n\n    this.subscription = null;\n  }\n\n  componentWillMount() {\n    this.getLocation();\n  }\n\n  getLocation() {\n    if (navigator) {\n      const geolocation = navigator.geolocation;\n\n      new Promise((resolve, reject) => {\n        geolocation.getCurrentPosition((position) => {\n          this.getWeatherForecast(position.coords.latitude, position.coords.longitude);\n        }, () => {\n          reject (new Error('Permission denied'));\n        });\n      });\n    } else {\n      console.log(`sorry but this didnt work`);\n    }\n  }\n\n  getWeatherForecast(lat, long) {\n    const API_KEY = `46ddd9c3c6a545d0d62e60754768e38d`;\n    const WEATHER_CURRENT_URL = `http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${long}&appid=${API_KEY}&units=imperial`;\n    //const WEATHER_FORECAST_URL = `http://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${long}&appid=${API_KEY}&units=imperial`;\n    const WEATHER_FORECAST_URL = `http://api.openweathermap.org/data/2.5/forecast/daily?lat=${lat}&lon=${long}&appid=${API_KEY}&units=imperial&cnt=7`;\n\n    axios.get(WEATHER_CURRENT_URL).then(\n      (res) => {\n        if (res.data.cod !== '200' && res.data.message){\n          throw new Error(res.data.message);\n        } else {\n          this.setState({\n            currentData: res.data,\n          });\n          return res.data;\n        }\n      },\n      (res) => {\n        throw new Error(res.data.message);\n      }\n    );\n\n    /*\n    axios.get(WEATHER_FORECAST_URL).then(\n      (res) => {\n        if (res.data.cod !== '200' && res.data.message){\n          throw new Error(res.data.message);\n        } else {\n          let fiveDayForecast = [];\n          let dayArray = [];\n          res.data.list.map((timeData, index) => {\n            if ((index + 1) % 8 === 0) {\n              fiveDayForecast.push(dayArray);\n              dayArray = new Array;\n            } else {\n              dayArray.push(timeData);\n            }\n          });\n          this.setState({\n            weatherData: res.data,\n            fiveDayForecast: fiveDayForecast\n          });\n          return res.data;\n        }\n      },\n      (res) => {\n        throw new Error(res.data.message);\n      }\n    );\n    */\n\n    axios.get(WEATHER_FORECAST_URL).then(\n      (res) => {\n        if (res.data.cod !== '200' && res.data.message){\n          throw new Error(res.data.message);\n        } else {\n          let forecastData = [];\n          res.data.list.map((timeData, index) => {\n            forecastData.push(timeData);\n          });\n          this.setState({\n            weatherData: res.data,\n            forecastData: forecastData\n          });\n          return res.data;\n        }\n      },\n      (res) => {\n        throw new Error(res.data.message);\n      }\n    );\n  }\n\n  render() {\n    const widthStyle = {\n      width: `${100 / this.state.forecastData.length}%`\n    };\n\n    const mainCardStyle = {\n      background: `-webkit-linear-gradient(0deg, #43cff3, #e57263 ${this.state.currentData.main.temp}%)`,\n      background: `linear-gradient(0deg, #43cff3, #e57263 ${this.state.currentData.main.temp}%)`\n    };\n\n    return (\n      <div className=\"weather text-center mt-4 mb-4 container\">\n        <h1><i className=\"fa fa-map-marker\"></i> { this.state.currentData.name }</h1>\n\n        <h2><i className=\"fa fa-cloud\"></i> Today's Forecast</h2>\n        <ul className=\"current-day list-unstyled\">\n          <li className=\"card\">\n            <div className=\"container\" style={mainCardStyle}>\n              <label className=\"title\">{ momentjs.unix(this.state.currentData.dt).format('ddd') }</label>\n              <label className=\"number\">{ Math.round(this.state.currentData.main.temp) }</label>\n              <label>{ this.state.currentData.weather[0].main }</label>\n              <label>\n                <i className=\"fa fa-chevron-up\"></i> { Math.round(this.state.currentData.main.temp_max) }\n              </label>\n              <label>\n                <i className=\"fa fa-chevron-down\"></i> { Math.round(this.state.currentData.main.temp_min) }\n              </label>\n            </div>\n          </li>\n        </ul>\n\n        <div className=\"forecast clearfix\">\n          <h2><i className=\"fa fa-cloud\"></i> Upcoming Forecast</h2>\n          <ul className=\"day list-unstyled\">\n            {\n              this.state.forecastData.map(function(day) {\n                let dayString = momentjs.unix(day.dt).format('ddd');\n                let dayCardStyle = {\n                  background: `-webkit-linear-gradient(0deg, #43cff3, #e57263 ${day.temp.day}%)`,\n                  background: `linear-gradient(0deg, #43cff3, #e57263 ${day.temp.day}%)`\n                };\n                return (\n                  <li key={day.dt} className=\"card\" style={widthStyle}>\n                    <div className=\"container\" style={dayCardStyle}>\n                      <label className=\"title\">{ dayString }</label>\n                      <label className=\"number\">{ Math.round(day.temp.day) }</label>\n                      <label>{ day.weather[0].main }</label>\n                      <label>\n                        <i className=\"fa fa-chevron-up\"></i> { Math.round(day.temp.max) }\n                      </label>\n                      <label>\n                        <i className=\"fa fa-chevron-down\"></i> { Math.round(day.temp.min) }\n                      </label>\n                    </div>\n                  </li>\n                )\n              })\n            }\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// src/client/modules/weather/containers/weather.jsx"],"mappings":";;A;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AAAA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAHA;AAKA;AAEA;AACA;AAFA;AAXA;AAiBA;AACA;AACA;AACA;AAFA;AAIA;AALA;AAOA;AAzBA;AACA;AA2BA;AA9BA;AA+BA;AACA;;;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAEA;AACA;AAEA;;;AAEA;AACA;AACA;AADA;AACA;AAGA;AACA;AADA;AACA;AAIA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAGA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAPA;AADA;AADA;AAgBA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AADA;AAIA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAGA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAPA;AADA;AAcA;AAvBA;AAFA;AApBA;AAmDA;;;;AA7LA;AACA;;;;;A","sourceRoot":""}