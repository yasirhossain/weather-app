{"version":3,"file":"0.ab7efd4f64f9ef257a6c.hot-update.js","sources":["../.././~/persisted_queries.json","../../src/client/modules/weather/containers/weather.jsx"],"sourcesContent":["module.exports = {\n\t\"mutation addComment($input: AddCommentInput!) {\\n  addComment(input: $input) {\\n    ...CommentInfo\\n    __typename\\n  }\\n}\\n\\nfragment CommentInfo on Comment {\\n  id\\n  content\\n  __typename\\n}\\n\": 1,\n\t\"mutation addCount($amount: Int!) {\\n  addCount(amount: $amount) {\\n    amount\\n    __typename\\n  }\\n}\\n\": 2,\n\t\"mutation addPost($input: AddPostInput!) {\\n  addPost(input: $input) {\\n    ...PostInfo\\n    __typename\\n  }\\n}\\n\\nfragment PostInfo on Post {\\n  id\\n  title\\n  content\\n  __typename\\n}\\n\": 3,\n\t\"mutation deleteComment($input: DeleteCommentInput!) {\\n  deleteComment(input: $input) {\\n    id\\n    __typename\\n  }\\n}\\n\": 4,\n\t\"mutation deletePost($id: ID!) {\\n  deletePost(id: $id) {\\n    id\\n    __typename\\n  }\\n}\\n\": 5,\n\t\"mutation editComment($input: EditCommentInput!) {\\n  editComment(input: $input) {\\n    ...CommentInfo\\n    __typename\\n  }\\n}\\n\\nfragment CommentInfo on Comment {\\n  id\\n  content\\n  __typename\\n}\\n\": 6,\n\t\"mutation editPost($input: EditPostInput!) {\\n  editPost(input: $input) {\\n    ...PostInfo\\n    __typename\\n  }\\n}\\n\\nfragment PostInfo on Post {\\n  id\\n  title\\n  content\\n  __typename\\n}\\n\": 7,\n\t\"query getCount {\\n  count {\\n    amount\\n    __typename\\n  }\\n}\\n\": 8,\n\t\"query getPost($id: ID!) {\\n  post(id: $id) {\\n    ...PostInfo\\n    comments {\\n      ...CommentInfo\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n\\nfragment PostInfo on Post {\\n  id\\n  title\\n  content\\n  __typename\\n}\\n\\nfragment CommentInfo on Comment {\\n  id\\n  content\\n  __typename\\n}\\n\": 9,\n\t\"query getPosts($limit: Int!, $after: ID) {\\n  postsQuery(limit: $limit, after: $after) {\\n    totalCount\\n    edges {\\n      cursor\\n      node {\\n        ...PostInfo\\n        __typename\\n      }\\n      __typename\\n    }\\n    pageInfo {\\n      endCursor\\n      hasNextPage\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n\\nfragment PostInfo on Post {\\n  id\\n  title\\n  content\\n  __typename\\n}\\n\": 10,\n\t\"query getWeather {\\n  weather\\n}\\n\": 11,\n\t\"subscription onCommentUpdated($postId: ID!) {\\n  commentUpdated(postId: $postId) {\\n    mutation\\n    id\\n    postId\\n    node {\\n      ...CommentInfo\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n\\nfragment CommentInfo on Comment {\\n  id\\n  content\\n  __typename\\n}\\n\": 12,\n\t\"subscription onCountUpdated {\\n  countUpdated {\\n    amount\\n    __typename\\n  }\\n}\\n\": 13,\n\t\"subscription onPostUpdated($id: ID!) {\\n  postUpdated(id: $id) {\\n    ...PostInfo\\n    __typename\\n  }\\n}\\n\\nfragment PostInfo on Post {\\n  id\\n  title\\n  content\\n  __typename\\n}\\n\": 14\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/persisted_queries.json\n// module id = ./node_modules/persisted_queries.json\n// module chunks = 0","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { graphql, compose } from 'react-apollo';\nimport update from 'immutability-helper';\nimport { Button } from 'reactstrap';\n\nimport AMOUNT_QUERY from '../graphql/count_get.graphql';\nimport ADD_COUNT_MUTATION from '../graphql/count_add_mutation.graphql';\nimport COUNT_SUBSCRIPTION from '../graphql/count_subscribe.graphql';\n\nimport WEATHER_QUERY from '../graphql/weather_get.graphql';\n\nclass Weather extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.subscription = null;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.loading) {\n      if (this.subscription) {\n        this.subscription();\n        this.subscription = null;\n      }\n\n      // Subscribe or re-subscribe\n      if (!this.subscription) {\n        this.subscribeToCount();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.subscription) {\n      this.subscription();\n    }\n  }\n\n  handleReduxIncrement(e) {\n    let value;\n    if (e && e.target) {\n      value = e.target.value;\n    } else {\n      value = e;\n    }\n\n    this.props.onReduxIncrement(value);\n  }\n\n  subscribeToCount() {\n    const { subscribeToMore } = this.props;\n    this.subscription = subscribeToMore({\n      document: COUNT_SUBSCRIPTION,\n      variables: {},\n      updateQuery: (prev, {subscriptionData: {data: {countUpdated: { amount }}}}) => {\n        return update(prev, {\n          count: {\n            amount: {\n              $set: amount,\n            },\n          }\n        });\n      }\n    });\n  }\n\n  render() {\n    const { loading, count, addCount, reduxCount } = this.props;\n    if (loading) {\n      return (\n        <div className=\"text-center\">\n          Loading...\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"text-center mt-4 mb-4\">\n          ITS DAT BOI WUDDUP\n        </div>\n      );\n    }\n  }\n}\n\nWeather.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  count: PropTypes.object,\n  updateCountQuery: PropTypes.func,\n  onReduxIncrement: PropTypes.func,\n  addCount: PropTypes.func.isRequired,\n  subscribeToMore: PropTypes.func.isRequired,\n  reduxCount: PropTypes.number.isRequired,\n};\n\nconst WeatherWithApollo = compose(\n  graphql(WEATHER_QUERY, {\n    props({ data: { loading, weather } }) {\n      return { loading, weather };\n    }\n  }),\n  graphql(AMOUNT_QUERY, {\n    props({ data: { loading, count, subscribeToMore } }) {\n      return { loading, count, subscribeToMore };\n    }\n  }),\n  graphql(ADD_COUNT_MUTATION, {\n    props: ({ ownProps, mutate }) => ({\n      addCount(amount) {\n        return () => mutate({\n          variables: { amount },\n          updateQueries: {\n            getCount: (prev, { mutationResult }) => {\n              const newAmount = mutationResult.data.addCount.amount;\n              return update(prev, {\n                count: {\n                  amount: {\n                    $set: newAmount,\n                  },\n                },\n              });\n            },\n          },\n          optimisticResponse: {\n            __typename: 'Mutation',\n            addCount: {\n              __typename: 'Count',\n              amount: ownProps.count.amount + 1,\n            },\n          },\n        });\n      },\n    }),\n  })\n)(Weather);\n\nexport default connect(\n  (state) => ({ reduxCount: state.counter.reduxCount }),\n  (dispatch) => ({\n    onReduxIncrement(value)\n    {\n      dispatch({\n        type: 'COUNTER_INCREMENT',\n        value: Number(value)\n      });\n    }\n  }),\n)(WeatherWithApollo);\n\n\n\n// WEBPACK FOOTER //\n// src/client/modules/weather/containers/weather.jsx"],"mappings":";;A;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AAAA;AACA;AADA;AACA;AAEA;AAHA;AAIA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AADA;AADA;AADA;AAOA;AAXA;AAaA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAIA;AACA;;;;AAtEA;AACA;AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AASA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAHA;AAMA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAHA;AAMA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AADA;AADA;AADA;AAOA;AAVA;AAYA;AACA;AACA;AACA;AACA;AAFA;AAFA;AAdA;AAAA;AAsBA;AAxBA;AAAA;AADA;AACA;AA6BA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAFA;AAIA;AAPA;AAAA;;;;A","sourceRoot":""}